---
title: "BES2019 Poster"

author:
- Gracielle T. Higino^1^, ^2^ \*, Marcos V. C. Vital^2^
- ^1^Department de Sciences Biologiques, Université de Montréal
- ^2^Programa de Pós-Graduação em Ecologia e Evolução, Universidade Federal de Goiás
- ^3^Departamento de Coisas Legais, Universidade Federal de Alagoas
- \*graciellehigino@gmail.com

date: "`r format(Sys.time(), '%d de %B de %Y')`"

knit: (function(inputFile, encoding) {
      out_dir <- 'manuscript';
      rmarkdown::render(inputFile,
                        encoding = encoding,
                        output_file = file.path(dirname(inputFile),
                        out_dir,
                        'manuscript.docx')) })
output:
  word_document:
    reference_docx: manuscript/sources/template.docx
csl: manuscript/sources/ecology-letters.csl
bibliography:
- manuscript/sources/library.bib
- manuscript/sources/installed-r-packages.bib
---



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# http://stackoverflow.com/questions/28894515/rmarkdown-directing-output-file-into-a-directory
out_dir <- 'manuscript'
if(!file.exists(out_dir)) {
  dir.create(out_dir)
}
```



```{r r_packages, include = FALSE}
# ipak function: install and load multiple R packages.
# Check to see if packages are installed.
# Install them if they are not, then load them into the R session.
# https://gist.github.com/stevenworthington/3178163

ipak <- function(pkg){
    new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
    if (length(new.pkg))
    {
      install.packages(new.pkg,
                       dependencies = TRUE,
                       repos = "https://cloud.r-project.org")
    }
    suppressPackageStartupMessages(sapply(pkg, require, character.only = TRUE))
}

ipak(packages_list <- c(
                       "devtools",  # required; do not exclude from this list
                       "bibtex",    # required; do not exclude from this list
                       "knitr",     # required; do not exclude from this list
                       "rmarkdown", # required; do not exclude from this list
                       "pacman",    # required; do not exclude from this list
                       "captioner", # required; do not exclude from this list
                       "git2r",     # required; do not exclude from this list
                       "googlesheets4",
                       "curl",
                       "rgbif"
                       )
     )

pacman::p_load_gh(char = c(
                           # required; do not exclude from this list
                           "benmarwick/wordcountaddin",
                           # required; do not exclude from this list
                           "ropensci/rcrossref"
                           ),
                  install = TRUE,
                  dependencies = TRUE)

write.bib(packages_list, "manuscript/sources/installed-r-packages.bib")

fig <- captioner(prefix ="Figure")
tab <- captioner(prefix="Table")
```

# Abstract

*BES*
Biases and gaps on biodiversity data can have serious consequences on ecological and conservation research and actions, as it can lead to misconstrued hypotheses and incorrect conclusions. Although there is still digital knowledge to be found and organized, recent efforts on gathering global biodiversity data, such as data papers, have revealed long hidden information. Nevertheless, it is of major importance to map and describe the biases on the data we have available. Here we assessed terrestrial vertebrates inventory incompleteness at the Atlantic Rainforest and investigate if environmental variables are correlated to biodiversity knowledge. Our results showed clusters of quality information near big conservation centres. Environmental variables that commonly indicates species richness were not correlated to inventory completeness, but when only well-sampled units were analysed, mammals’ rarefaction slopes were correlated with potential evapotranspiration. Underexplored regions need urgent investments in sampling efforts to assess its real biodiversity and efficiently measure environmental impacts.


**Keywords: biodiversity digital knowledge, wallacean shortfall, macroecology, **

##### page break

# Intro



##### page break

# Methods



##### page break

# Results

```{r importing data, echo=FALSE, warning=FALSE,message=FALSE,results='hide'}
# Read CSV with urls for all data
#devtools::install_github("tidyverse/googlesheets4")
datasource <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1qq6YTTcAIZVI9olRVgSm5sKVlxuS-4yW-yD06TXJzgg/edit?usp=sharing")

# geting zip files from Data Papers

if(file.exists("data/data.Rdata")){
  load("data/data.Rdata")
} else {
  gbif<-rgbif::occ_download_import(occ_download_get("0023533-180131172636756"))

filenumbers <- 1:length(datasource$url)
filenames <- paste0("data/raw/file", filenumbers, ".zip")

for (i in 1:length(datasource$url)){
    files <-  list(download.file(datasource$url[i], filenames[i]))
    unzip(filenames[i], exdir = "/data/raw")
    }
}

#TODO - ORGANIZE ALL FILES IN A DATAFRAME AND SAVE EVERYTHING IN "data/data.Rdata" or something like that

```


##### page break

# Discussion


##### page break

# Conclusion

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit [@Vellend2001] in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

##### page break

# R packages

```{r eval = TRUE, echo = FALSE, results='asis'}
cite_pkg <- function(pkg_list) {

  packages <- sort(pkg_list)
  cites <- lapply(packages, utils::citation)
  cites.bib <- lapply(cites, utils::toBibtex)

  # generate reference key
  for (i in seq_len(length(cites.bib))) {
    cites.bib[[i]] <-
      sub(
        pattern = "\\{,$",
        replacement = paste0("{", packages[i], ","),
        x = cites.bib[[i]]
      )
  }

  # write bibtex references to file
  writeLines(enc2utf8(unlist(cites.bib)), con = "manuscript/sources/pkg-refs.bib", useBytes = TRUE)

  # return named list of bibtex references
  names(cites.bib) <- packages # pkgs

  writeLines(paste("- ", names(cites.bib), " [@", names(cites.bib), "]", sep = ""))
}


cite_pkg(packages_list)
```

##### page break

# References

<!-- https://stackoverflow.com/a/44294306/5974372 -->

<div id="refs"></div>

##### page break

# Tables

<!-- https://datascienceplus.com/r-markdown-how-to-number-and-reference-tables/ -->


```{r, eval=TRUE, echo=FALSE, results='asis'}
cat(tab(name = "tab_exemplo", "Apenas um exempĺo de como aplicar a legenda em uma tabela."))
knitr::kable(x = head(mtcars), format = "markdown", align = "c")
```

##### page break

# Figures

```{r, echo=FALSE, eval=TRUE, results='asis', fig.height=10, fig.width=10}
plot(1:10, pch = 21, bg = "red")
cat("\n", fig(name = "fig_exemplo", "Apenas um exemplo de como aplicar a legenda em um figura."))
```

##### page break

External figures can also be included using the `include_graphics` function. Example code below:

```{r, echo=TRUE, eval=FALSE}
include_graphics(path = "pasta/da/minha/figura", dpi = "2in")
```

##### page break

# Appendix

##### page break

Word count by *wordcountaddin* package

```{r, echo=TRUE, eval=TRUE, message=FALSE}
wordcountaddin::text_stats(filename = "main-script.Rmd")
```

##### page break

```{r session-info}
sessionInfo()
```
